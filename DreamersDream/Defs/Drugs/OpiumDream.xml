<?xml version="1.0" encoding="utf-8" ?>
<Defs>

  <ThingDef ParentName="MakeableDrugBase">
    <defName>Dream</defName>
    <label>dream</label>
    <description>Extremely addictive dream inducing drug.</description>
    <descriptionHyperlinks>
      <HediffDef>DreamHigh</HediffDef>
      <HediffDef>OpiumTolerance</HediffDef>
      <HediffDef>OpiumAddiction</HediffDef>
      <HediffDef>ChemicalDamageSevere</HediffDef>
    </descriptionHyperlinks>
    <graphicData>
      <texPath>Things/Item/Drug/Yayo</texPath>
      <graphicClass>Graphic_StackCount</graphicClass>
      <color>(150,170,150)</color>
      <drawSize>0.75</drawSize>
    </graphicData>
    <rotatable>false</rotatable>
    <statBases>
      <WorkToMake>250</WorkToMake>
      <MarketValue>14</MarketValue>
      <Mass>0.05</Mass>
      <DeteriorationRate>6</DeteriorationRate>
      <Flammability>1.3</Flammability>
    </statBases>
    <techLevel>Industrial</techLevel>
    <minRewardCount>10</minRewardCount>
    <ingestible>
      <foodType>Processed</foodType>
      <joyKind>Chemical</joyKind>
      <joy>0.70</joy>
      <baseIngestTicks>650</baseIngestTicks>
      <nurseable>true</nurseable>
      <drugCategory>Hard</drugCategory>
      <ingestSound>Ingest_Smoke</ingestSound>
      <ingestEffect>Smoke_Flake</ingestEffect>
      <ingestEffectEat>EatVegetarian</ingestEffectEat>
      <ingestHoldOffsetStanding>
        <northDefault>
          <offset>(0.23,0,0.065)</offset>
        </northDefault>
      </ingestHoldOffsetStanding>
      <ingestHoldUsesTable>false</ingestHoldUsesTable>
      <ingestCommandString>Smoke {0}</ingestCommandString>
      <ingestReportString>Smoking {0}.</ingestReportString>
      <useEatingSpeedStat>false</useEatingSpeedStat>
      <outcomeDoers>
        <li Class="IngestionOutcomeDoer_GiveHediff">
          <hediffDef>DreamHigh</hediffDef>
          <severity>0.75</severity>
          <toleranceChemical>Opium</toleranceChemical>
        </li>
        <li Class="IngestionOutcomeDoer_OffsetNeed">
          <need>Rest</need>
          <offset>0.2</offset>
          <toleranceChemical>Opium</toleranceChemical>
        </li>
        <li Class="IngestionOutcomeDoer_GiveHediff">
          <hediffDef>OpiumTolerance</hediffDef>
          <severity>0.04</severity>
          <divideByBodySize>true</divideByBodySize>
        </li>
      </outcomeDoers>
    </ingestible>
    <recipeMaker>
      <recipeUsers>
        <li>DrugLab</li>
      </recipeUsers>
      <soundWorking>Recipe_Drug</soundWorking>
    </recipeMaker>
    <costList>
      <OpiumLeaves>4</OpiumLeaves>
    </costList>
    <comps>
      <li Class="DreamersDream.DD_CompProperties_DreamDrug">
        <chemical>Opium</chemical>
        <addictiveness>0.05</addictiveness>
        <existingAddictionSeverityOffset>0.30</existingAddictionSeverityOffset>
        <needLevelOffset>0.9</needLevelOffset>
        <listOrder>110</listOrder>
        <overdoseSeverityOffset>0.18~0.35</overdoseSeverityOffset>
        <largeOverdoseChance>0.015</largeOverdoseChance>
        <DreamMessage>DreamMessage</DreamMessage>
      </li>
    </comps>
  </ThingDef>

  <HediffDef>
    <defName>DreamHigh</defName>
    <label>high on dream</label>
    <labelNoun>a dream high</labelNoun>
    <description>Active dream in the bloodstream. Generates amazing dreams.</description>
    <hediffClass>Hediff_High</hediffClass>
    <defaultLabelColor>(1,0,0.5)</defaultLabelColor>
    <scenarioCanAdd>true</scenarioCanAdd>
    <maxSeverity>1.0</maxSeverity>
    <isBad>false</isBad>
    <comps>
      <li Class="HediffCompProperties_SeverityPerDay">
        <severityPerDay>-1.5</severityPerDay>
        <showHoursToRecover>true</showHoursToRecover>
      </li>
    </comps>
      <stages>
        <li>
          <restFallFactor>100.0</restFallFactor>
        </li>
      </stages>
  </HediffDef>

  <ThoughtDef>
    <defName>DreamHigh</defName>
    <workerClass>ThoughtWorker_Hediff</workerClass>
    <hediff>DreamHigh</hediff>
    <validWhileDespawned>true</validWhileDespawned>
    <stages>
      <li>
        <label>high on dream</label>
        <description>My dreams are amazing.</description>
        <baseMoodEffect>10</baseMoodEffect>
      </li>
    </stages>
  </ThoughtDef>

  <!-- Addiction    -->

  <ChemicalDef>
    <defName>Opium</defName>
    <label>Opium</label>
    <addictionHediff>OpiumAddiction</addictionHediff>
    <toleranceHediff>OpiumTolerance</toleranceHediff>
    <onGeneratedAddictedToleranceChance>0.6</onGeneratedAddictedToleranceChance>
  </ChemicalDef>

  <NeedDef ParentName="DrugAddictionNeedBase">
    <defName>Chemical_Opium</defName>
    <needClass>Need_Chemical</needClass>
    <label>opium</label>
    <description>Because of a opium dependence, this person needs to regularly consume the drug to avoid withdrawal symptoms.</description>
    <listPriority>25</listPriority>
  </NeedDef>

  <HediffDef ParentName="DrugToleranceBase">
    <defName>OpiumTolerance</defName>
    <label>opium tolerance</label>
    <description>A built-up tolerance to opium. The more severe this tolerance is, the more opium it takes to get the same effect.</description>
    <comps>
      <li Class="HediffCompProperties_SeverityPerDay">
        <severityPerDay>-0.005</severityPerDay>
      </li>
      <li Class="HediffCompProperties_DrugEffectFactor">
        <chemical>Opium</chemical>
      </li>
    </comps>
  </HediffDef>

  <HediffDef ParentName="AddictionBase">
    <defName>OpiumAddiction</defName>
    <label>opium dependence</label>
    <description>A chemical addiction to opium. Long-term use of opium has caused neurological adaptations at the cellular level, so the brain can no longer function properly without the drug.
\nWithout regular doses of opium, withdrawal symptoms will begin. However, extended abstinence will force the brain to adapt back to its normal state, resolving the addiction.</description>
    <hediffClass>Hediff_Addiction</hediffClass>
    <causesNeed>Chemical_Opium</causesNeed>
    <comps>
      <li Class="HediffCompProperties_SeverityPerDay">
        <severityPerDay>-0.0333</severityPerDay>
        <showDaysToRecover>true</showDaysToRecover>
      </li>
    </comps>
    <stages>
      <li>
      </li>
      <li>
        <label>withdrawal</label>
        <capMods>
          <li>
            <capacity>Consciousness</capacity>
            <offset>-0.60</offset>
          </li>
          <li>
            <capacity>Moving</capacity>
            <offset>-0.15</offset>
          </li>
        </capMods>
        <mentalStateGivers>
          <li>
            <mentalState>Binging_Food</mentalState>
            <mtbDays>30</mtbDays>
          </li>
          <li>
            <mentalState>Binging_DrugMajor</mentalState>
            <mtbDays>50</mtbDays>
          </li>
        </mentalStateGivers>
      </li>
    </stages>
  </HediffDef>

  <ThoughtDef>
    <defName>OpiumWithdrawal</defName>
    <workerClass>ThoughtWorker_Hediff</workerClass>
    <hediff>OpiumAddiction</hediff>
    <validWhileDespawned>true</validWhileDespawned>
    <stages>
      <li>
        <visible>false</visible>
      </li>
      <li>
        <label>opium withdrawal</label>
        <description>I can't stand it! I need to DREAM MORE!</description>
        <baseMoodEffect>-20</baseMoodEffect>
      </li>
    </stages>
  </ThoughtDef>

</Defs>
